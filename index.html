<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>College Finder ‚Äî Firebase Messages</title>
  <link rel="icon" type="image/png" href="my-logo.png">
  <style>
    :root{--brand:#0a3d62;--accent:#ffcc00;--bg:#eef3f8;--card:#fff}
    *{box-sizing:border-box}
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#123}
    header{background:var(--brand);color:#fff;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
    header h1{margin:0;font-size:20px}
    .wrap{display:flex;gap:18px;max-width:1100px;margin:18px auto;padding:0 12px}
    .sidebar{width:230px;background:var(--brand);color:#fff;border-radius:10px;padding:12px;min-height:70vh;position:sticky;top:78px}
    .logo{display:flex;gap:8px;align-items:center}
    .logo img{height:44px;width:44px;border-radius:8px;object-fit:cover}
    .tab-button{display:block;padding:10px 12px;color:#fff;text-decoration:none;border-radius:6px;margin:6px 0;border-left:4px solid transparent;cursor:pointer;background:transparent;border:none;text-align:left}
    .tab-button:hover{background:#074068}
    .tab-button.active{background:#052a4a;border-left:4px solid var(--accent)}
    main{flex:1}
    .card{background:var(--card);padding:14px;border-radius:10px;margin-bottom:16px;box-shadow:0 6px 18px rgba(6,30,60,0.06)}
    .flip-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
    .flip{background:linear-gradient(135deg,#fff,#dbe9ff);border-radius:10px;height:130px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:12px;position:relative;cursor:pointer}
    .view-btn{position:absolute;right:10px;bottom:10px;background:var(--accent);color:#111;padding:6px 10px;border-radius:6px;border:none;cursor:pointer;font-weight:700}
    /* messages */
    #messages-wrap{display:flex;gap:12px;height:70vh}
    .chats-list{width:320px;background:var(--card);border-radius:10px;padding:10px;overflow:auto}
    .chat-window{flex:1;background:var(--card);border-radius:10px;padding:10px;display:flex;flex-direction:column}
    .chat-header{display:flex;align-items:center;gap:12px;padding-bottom:8px;border-bottom:1px solid #eee}
    .messages{flex:1;overflow:auto;padding:12px}
    .msg{display:inline-block;max-width:80%;padding:8px 12px;margin:8px 0;border-radius:12px}
    .msg.user{background:#d9eaff;margin-left:auto}
    .msg.admin{background:#f1f1f1;margin-right:auto}
    .chat-input{display:flex;gap:8px;padding-top:8px}
    .chat-input input{flex:1;padding:10px;border-radius:8px;border:1px solid #ddd}
    .chat-input button{padding:10px 14px;border-radius:8px;border:none;background:var(--brand);color:#fff;cursor:pointer}
    /* responsive */
    @media(max-width:900px){
      .wrap{flex-direction:column;padding:0 10px}
      .sidebar{width:100%;display:flex;overflow-x:auto;gap:8px}
      .tab-button{flex:0 0 auto;padding:8px 12px;border-left:none;border-bottom:3px solid transparent}
      .tab-button.active{border-bottom:4px solid var(--accent)}
      #messages-wrap{flex-direction:column;height:60vh}
      .chats-list{width:100%}
    }
  </style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;gap:12px">
    <img src="my-logo.jpg" alt="logo" style="height:36px;width:36px;border-radius:6px;object-fit:cover">
    <h1>College Finder</h1>
  </div>
  <div id="auth-area" style="display:flex;align-items:center;gap:10px">
    <span id="welcomeTxt" style="color:#fff;font-size:14px">Not signed in</span>
    <button id="btn-auth" style="background:transparent;border:1px solid rgba(255,255,255,0.18);color:#fff;padding:8px 10px;border-radius:8px;cursor:pointer">Login / Signup</button>
  </div>
</header>

<div class="wrap">
  <aside class="sidebar" id="sidebar">
    <div class="logo"><img src="my-logo.jpg"><div style="font-weight:700">College Finder</div></div>

    <button class="tab-button active" data-tab="home" onclick="switchTab('home',this)">üè† Home</button>
    <button class="tab-button" data-tab="chennai" onclick="switchTab('chennai',this)">Chennai</button>
    <button class="tab-button" data-tab="pondy" onclick="switchTab('pondy',this)">Pondicherry</button>
    <button class="tab-button" data-tab="coimbatore" onclick="switchTab('coimbatore',this)">Coimbatore</button>
    <button class="tab-button" data-tab="trichy" onclick="switchTab('trichy',this)">Trichy</button>
    <button class="tab-button" data-tab="madurai" onclick="switchTab('madurai',this)">Madurai</button>

    <div style="margin-top:12px;border-top:1px solid rgba(255,255,255,0.06);padding-top:12px">
      <div style="font-size:13px;color:#dfe9f5">Logged in user</div>
      <div id="sidebar-user" style="font-weight:700;margin-top:6px">‚Äî</div>
          </div>
  </aside>

  <main id="content">

    <!-- HOME TAB -->
    <div id="home" class="card">
      <h2>Welcome to College Finder</h2>
      <p>Select a city from the sidebar to explore colleges.</p>

      <div class="flip-grid">
        <div class="flip">
          <div style="font-size:22px;font-weight:700">300+</div>
          <div>Colleges Listed</div>
        </div>
        <div class="flip">
          <div style="font-size:22px;font-weight:700">Verified</div>
          <div>Trusted Information</div>
        </div>
      </div>
    </div>

    <!-- CITY PAGES (dummy content) -->
    <div id="chennai" class="card" style="display:none">
      <h2>Chennai Colleges</h2>
      <p>List coming soon‚Ä¶</p>
    </div>

    <div id="pondy" class="card" style="display:none">
      <h2>Pondicherry Colleges</h2>
      <p>List coming soon‚Ä¶</p>
    </div>

    <div id="coimbatore" class="card" style="display:none">
      <h2>Coimbatore Colleges</h2>
      <p>List coming soon‚Ä¶</p>
    </div>

    <div id="trichy" class="card" style="display:none">
      <h2>Trichy Colleges</h2>
      <p>List coming soon‚Ä¶</p>
    </div>

    <div id="madurai" class="card" style="display:none">
      <h2>Madurai Colleges</h2>
      <p>List coming soon‚Ä¶</p>
    </div>

    <!-- MESSAGES TAB -->
    <div id="messages" class="card" style="display:none">
      <h2>Messages</h2>

      <div id="messages-wrap">
        <div class="chats-list" id="chatList"></div>

        <div class="chat-window">
          <div class="chat-header" id="chatHeader">
            <strong>Select a chat</strong>
          </div>

          <div class="messages" id="chatMessages"></div>

          <div class="chat-input">
            <input id="msgInput" type="text" placeholder="Type a message‚Ä¶">
            <button onclick="sendMessage()">Send</button>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- AUTH POPUP -->
<div id="authPopup" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.55);justify-content:center;align-items:center">
  <div style="background:#fff;padding:20px;border-radius:12px;width:300px">
    <h3 style="margin-top:0">Login / Signup</h3>

    <input id="authEmail" type="email" placeholder="Email" style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ccc">
    <input id="authPass" type="password" placeholder="Password" style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ccc">

    <button onclick="login()" style="width:100%;padding:10px;background:#0a3d62;color:#fff;border:none;border-radius:8px;margin-top:6px">Login</button>
    <button onclick="signup()" style="width:100%;padding:10px;background:#ffcc00;border:none;border-radius:8px;margin-top:6px">Signup</button>
    <button onclick="closeAuth()" style="width:100%;padding:10px;background:#ddd;border:none;border-radius:8px;margin-top:6px">Close</button>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js"></script>

<script>
/* ---------------- FIREBASE CONFIG ----------------- */
const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  databaseURL: "YOUR_DB",
  projectId: "YOUR_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_SENDER",
  appId: "YOUR_APPID"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

/* ---------------- UI TABS ----------------- */
function switchTab(tab, btn) {
  document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');

  document.querySelectorAll('main .card').forEach(c => c.style.display = 'none');
  document.getElementById(tab).style.display = 'block';
}

/* ---------------- AUTH POPUP ----------------- */
function openAuth(){ authPopup.style.display="flex"; }
function closeAuth(){ authPopup.style.display="none"; }

btn-auth.onclick = openAuth;

function signup(){
  auth.createUserWithEmailAndPassword(authEmail.value, authPass.value)
    .then(()=>closeAuth())
    .catch(e=>alert(e.message));
}

function login(){
  auth.signInWithEmailAndPassword(authEmail.value, authPass.value)
    .then(()=>closeAuth())
    .catch(e=>alert(e.message));
}

/* ---------------- AUTH STATE ----------------- */
auth.onAuthStateChanged(user=>{
  if(user){
    welcomeTxt.innerText = "Signed in: " + user.email;
    sidebar-user.innerText = user.email;

    if(user.email === "mithun@admin.com"){
      document.querySelector('.sidebar').innerHTML += `
        <button class="tab-button" data-tab="messages" onclick="switchTab('messages',this)">üí¨ Messages</button>
      `;
    }

    loadChatList();
  } else {
    welcomeTxt.innerText = "Not signed in";
    sidebar-user.innerText = "‚Äî";
  }
});

/* ---------------- MESSAGES ----------------- */
let currentChat = null;

function loadChatList(){
  db.ref("messages").on("value", snap=>{
    let chats = snap.val() || {};
    chatList.innerHTML = "";

    Object.keys(chats).forEach(uid=>{
      chatList.innerHTML += `
        <div style="padding:10px;border-bottom:1px solid #eee;cursor:pointer"
          onclick="openChat('${uid}')">
          ${uid}
        </div>
      `;
    });
  });
}

function openChat(uid){
  currentChat = uid;
  chatHeader.innerHTML = `<strong>${uid}</strong>`;
  loadMessages(uid);
}

function loadMessages(uid){
  db.ref("messages/" + uid).on("value", snap=>{
    let msgs = snap.val() || {};
    chatMessages.innerHTML = "";

    Object.keys(msgs).forEach(k=>{
      let m = msgs[k];
      let cls = (m.from === "admin") ? "admin" : "user";

      chatMessages.innerHTML += `
        <div class="msg ${cls}">${m.text}</div>
      `;
    });

    chatMessages.scrollTop = chatMessages.scrollHeight;
  });
}

function sendMessage(){
  if(!currentChat) return;

  db.ref("messages/" + currentChat).push({
    from:"admin",
    text: msgInput.value,
    time: Date.now()
  });

  msgInput.value="";
}
</script>

</body>
</html>

     
