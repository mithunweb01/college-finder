<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Campus Finder Hub</title>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...YOUR_BASE64..."></link>
<style>
/* --- BASIC RESET --- */
body { margin:0; font-family: Arial; background:#f4f4f4; }
header { background:#800000; color:white; padding:12px; text-align:center; font-size:22px; }
nav { display:flex; background:white; border-bottom:1px solid #ccc; }
nav button { flex:1; padding:14px; border:none; background:white; font-size:16px; cursor:pointer; }
nav button.active { background:#800000; color:white; }
section { display:none; padding:15px; }
section.active { display:block; }
.card { background:white; padding:15px; margin:10px 0; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.15); }
.city-title { font-size:20px; font-weight:bold; color:#800000; }
.flip { background:#fff; border-radius:10px; padding:10px; margin:10px 0; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
/* --- MESSAGE AREA --- */
#messagesBox { height:300px; overflow-y:auto; background:white; padding:10px; border-radius:8px; }
.msg { display:flex; margin:10px 0; }
.msg img { width:40px; height:40px; border-radius:50%; margin-right:10px; }
.msg .bubble { background:#eee; padding:10px; border-radius:8px; max-width:70%; }
.msg.admin .bubble { background:#ffe6e6; border-left:4px solid #800000; }
.time { font-size:11px; color:#555; margin-top:3px; }
/* PROFILE */
#profilePhoto { width:90px; height:90px; border-radius:50%; border:3px solid #800000; }
</style>
</head>
<body>
<header>Campus Finder Hub</header>

<nav>
<button onclick="openTab('home')" class="active">Home</button>
<button onclick="openTab('cities')">Cities</button>
<button onclick="openTab('messages')">Messages</button>
<button onclick="openTab('profile')">Profile</button>
</nav>

<!-- HOME TAB -->
<section id="home" class="active">
<h2>Welcome to Campus Finder Hub</h2>
<div class="flip">Accurate College Data</div>
<div class="flip">Tamil Nadu + All India</div>
<div class="flip">Message System Support</div>
</section>

<!-- CITIES TAB -->
<section id="cities">
<h2>Cities</h2>
<div class="card"><div class="city-title">Chennai</div>Chennai colleges info here.</div>
<div class="card"><div class="city-title">Coimbatore</div>Coimbatore colleges info here.</div>
<div class="card"><div class="city-title">Madurai</div>Madurai colleges info here.</div>
</section>

<!-- MESSAGES TAB -->
<section id="messages">
<h2>Messages</h2>
<div id="messagesBox"></div>
<br>
<input id="msgInput" placeholder="Type message" style="width:80%;padding:10px;">
<button onclick="sendMessage()" style="padding:10px;background:#800000;color:white;border:none;">Send</button>
</section>

<!-- PROFILE TAB -->
<section id="profile">
<h2>Your Profile</h2>
<img id="profilePhoto" src="" />
<br><br>
<input type="file" id="photoUpload" accept="image/*">
<div id="profileName"></div>
<div id="profileEmail"></div>
</section>

<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-messaging-compat.js"></script>

<script>
// FIREBASE CONFIG
const firebaseConfig = {
apiKey:"AIzaSyDjW_3cYR8apPFMmZqLqZh_9i2bN-1IEmY",
authDomain:"college-finder-279aa.firebaseapp.com",
databaseURL:"https://college-finder-279aa-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"college-finder-279aa",
storageBucket:"college-finder-279aa.appspot.com",
messagingSenderId:"94401695690",
appId:"1:94401695690:web:380de91d4f168ea2944933"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.database();
const messaging=firebase.messaging();

// TABS
function openTab(tab){ document.querySelectorAll("section").forEach(s=>s.classList.remove("active")); document.getElementById(tab).classList.add("active"); document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active")); }

// SIMPLE AUTO LOGIN
auth.signInAnonymously().then(()=>{
console.log("Logged in anonymous");
});

function sendMessage(){ let text=document.getElementById("msgInput").value.trim(); if(!text) return; db.ref("messages").push({text, time:Date.now()}); document.getElementById("msgInput").value=""; }

db.ref("messages").on("child_added",snap=>{
let d=snap.val();
let box=document.getElementById("messagesBox");
let div=document.createElement("div"); div.className="msg";
div.innerHTML=`<img src="https://via.placeholder.com/40"/><div><div class='bubble'>${d.text}</div><div class='time'>${new Date(d.time).toLocaleTimeString()}</div></div>`;
box.appendChild(div);
box.scrollTop=box.scrollHeight;
});

// SERVICE WORKER
if('serviceWorker' in navigator){ navigator.serviceWorker.register('firebase-messaging-sw.js'); }
</script>

</body>
</html>
