<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>College Finder</title>
  <link rel="canonical" href="https://mithunweb01.github.io/" />
  <meta name="description" content="Find top engineering, medical, arts, and science colleges in Tamil Nadu.">
  <meta name="keywords" content="Colleges in Chennai, Coimbatore, Pondicherry, Trichy, Madurai">
  <meta name="author" content="Mithun">

  <!-- FIXED FAVICON -->
  <link rel="icon" type="image/png" href="my-logo.png">

  <style>
    body{font-family:Arial;margin:0;background:#eef5ff}
    header{display:flex;align-items:center;gap:10px;padding:10px;background:#fff;border-bottom:1px solid #ddd}
    header img{height:45px;width:45px;border-radius:8px}
    .container{display:flex;min-height:calc(100vh - 60px)}
    .sidebar{width:230px;background:#003366;color:#fff;padding-top:10px;display:flex;flex-direction:column}
    .tab-button{padding:12px;border:none;background:none;color:#fff;text-align:left;font-size:16px;cursor:pointer;border-left:4px solid transparent}
    .tab-button.active{background:#0055aa;border-left:4px solid #ffcc00}
    .content{flex:1;padding:20px;background:#f8fbff;overflow-y:auto}

    /* POPUP */
    #auth-popup{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center;z-index:999}
    #auth-box{background:white;padding:20px;width:300px;border-radius:10px;text-align:center}
    #auth-box input{width:90%;padding:8px;margin:6px 0;border:1px solid #aaa;border-radius:5px}
    #auth-box button{padding:10px 14px;margin-top:8px;background:#003366;color:#fff;border:none;border-radius:6px;cursor:pointer;width:100%}

    /* SUPPORT CHAT */
    #support-box{max-width:700px;margin:auto}
    #chat-window{height:350px;background:#fff;border:1px solid #ccc;border-radius:8px;padding:10px;overflow-y:auto;margin-bottom:10px}
    #chat-window .msg{padding:6px 10px;margin:6px 0;border-radius:6px;max-width:80%}
    .user-msg{background:#d9eaff;margin-left:auto}
    .ai-msg{background:#ffe9a8;margin-right:auto}
    #support-box input{width:100%;padding:10px;border-radius:6px;border:1px solid #aaa}

    /* HOME LOGIN INFO */
    #after-login-msg{display:none;background:#fff4c4;padding:10px;border-radius:8px}

  </style>
</head>
<body>

<header>
  <img src="my-logo.png">
  <h1>College Finder</h1>
</header>

<div id="auth-popup"><div id="auth-box">
  <h3 id="auth-title">Login</h3>
  <input id="username" placeholder="Username">
  <input id="dob" type="date" placeholder="DOB">
  <button onclick="submitAuth()">Continue</button>
</div></div>

<div class="container">
  <nav class="sidebar" id="sidebar">
    <button class="tab-button active" onclick="openTab('home',event)">üè† Home</button>
    <button class="tab-button" onclick="requireLogin('chennai',event)">Chennai</button>
    <button class="tab-button" onclick="requireLogin('pondy',event)">Pondicherry</button>
    <button class="tab-button" onclick="requireLogin('coimbatore',event)">Coimbatore</button>
    <button class="tab-button" onclick="requireLogin('trichy',event)">Trichy</button>
    <button class="tab-button" onclick="requireLogin('madurai',event)">Madurai</button>
  </nav>

  <main class="content">
    <section id="home" class="tab-content" style="display:block;">
      <h1>Welcome to College Finder</h1>
      <p id="after-login-msg">üéâ You are logged in! Use the new <b>Support</b> tab to chat with AI and find colleges quickly.</p>
    </section>

    <section id="support" class="tab-content" style="display:none;"></section>

    <section id="chennai" class="tab-content" style="display:none;">Chennai List</section>
    <section id="pondy" class="tab-content" style="display:none;">Pondy List</section>
    <section id="coimbatore" class="tab-content" style="display:none;">Coimbatore List</section>
    <section id="trichy" class="tab-content" style="display:none;">Trichy List</section>
    <section id="madurai" class="tab-content" style="display:none;">Madurai List</section>

  </main>
</div>

<script>
let loggedIn = false;

function requireLogin(tab,event){
  if(!loggedIn){ event.preventDefault(); showPopup(); return; }
  openTab(tab,event);
}

function showPopup(){ document.getElementById("auth-popup").style.display="flex"; }

function submitAuth(){
  let u = document.getElementById("username").value.trim();
  let d = document.getElementById("dob").value.trim();
  if(!u || !d){ alert("Enter all details"); return; }

  loggedIn = true;
  document.getElementById("auth-popup").style.display="none";
  document.getElementById("after-login-msg").style.display="block";

  createSupportTab();
}

function createSupportTab(){
  if(document.getElementById("support-btn")) return;

  let btn = document.createElement("button");
  btn.id = "support-btn";
  btn.className = "tab-button";
  btn.textContent = "üí¨ Support";
  btn.onclick = (e)=>openTab('support',e);
  document.getElementById("sidebar").appendChild(btn);

  document.getElementById("support").innerHTML = `
    <div id='support-box'>
      <h2>AI Support</h2>
      <div id='chat-window'></div>
      <input id='chat-input' placeholder='Ask about any college...' onkeydown="if(event.key==='Enter') sendMsg()">
    </div>`;
}

function openTab(t,event){
  document.querySelectorAll('.tab-content').forEach(x=>x.style.display='none');
  document.querySelectorAll('.tab-button').forEach(x=>x.classList.remove('active'));
  if(event) event.currentTarget.classList.add('active');
  document.getElementById(t).style.display='block';
}

function sendMsg(){
  let input = document.getElementById('chat-input');
  let txt = input.value.trim(); if(!txt) return;

  let win = document.getElementById('chat-window');
  win.innerHTML += `<div class='msg user-msg'>${txt}</div>`;

  let reply = getAIReply(txt);
  win.innerHTML += `<div class='msg ai-msg'>${reply}</div>`;
  input.value="";
  win.scrollTop = win.scrollHeight;
}

// === AI LOGIC WITH FILTERS ===
function getAIReply(q){
  q = q.toLowerCase();

  const colleges = [
    {name:"IIT Madras", course:"engineering", city:"chennai", cutoff:95, fees:200000, trust:5},
    {name:"SSN College", course:"engineering", city:"chennai", cutoff:85, fees:160000, trust:5},
    {name:"CIT", course:"engineering", city:"coimbatore", cutoff:80, fees:130000, trust:4},
    {name:"PSG Tech", course:"engineering", city:"coimbatore", cutoff:90, fees:175000, trust:5},
    {name:"MMC Chennai", course:"medical", city:"chennai", cutoff:92, fees:250000, trust:5},
    {name:"JIPMER", course:"medical", city:"pondicherry", cutoff:96, fees:210000, trust:5},
    {name:"Stanley Medical College", course:"medical", city:"chennai", cutoff:91, fees:190000, trust:5},
    {name:"Loyola College", course:"arts", city:"chennai", cutoff:78, fees:85000, trust:5},
    {name:"MCC", course:"arts", city:"chennai", cutoff:75, fees:90000, trust:5},
    {name:"PSG CAS", course:"arts", city:"coimbatore", cutoff:72, fees:80000, trust:4}
  ];

  // FILTERING
  let results = colleges.filter(c => (
    q.includes(c.course) ||
    q.includes(c.city) ||
    q.includes("low fees") && c.fees < 100000 ||
    q.includes("high trust") && c.trust >= 5 ||
    q.includes("low cutoff") && c.cutoff < 80 ||
    q.includes("top") && c.trust >= 5
  ));

  if(results.length === 0){
    return "No exact matches found. Try asking: 'top engineering colleges in Chennai'";
  }

  let reply = "Here are the best matches:<br><br>";
  results.slice(0,5).forEach((c,i)=>{
    reply += `${i+1}. <b>${c.name}</b> ‚Äî ${c.course} ‚Äî ${c.city}<br>Cutoff: ${c.cutoff}% | Fees: ‚Çπ${c.fees} | Trust: ${c.trust}/5<br><br>`;
  });

  return reply;
}
</script>

</body>
</html>
